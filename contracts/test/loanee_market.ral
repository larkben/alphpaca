Contract LoaneeMarket (
    creator: Address,
    token: ByteVec,
    mut tokenAmount: U256,
    // specs
    mut minInterest: U256,
    mut maxTime: U256,
    mut liquidation: Bool,
    parentContract: Address
) {
    pub fn getLoaneeTokenDetails() -> (ByteVec, U256) {
        return token, tokenAmount
    }

    pub fn getLoaneeDetails() -> (Address, U256, U256, Bool) {
        return creator, minInterest, maxTime, liquidation
    }

    // edit min interest
    @using(checkExternalCaller = true, updateFields = true)
    pub fn editMinInterest(caller: Address, interest: U256) -> () {
        checkCaller!(callerAddress!() == parentContract, 0)

        assert!(caller == creator, 1)

        minInterest = interest
    }

    // edit max time
    @using(checkExternalCaller = true, updateFields = true)
    pub fn editMaxTime(caller: Address, time: U256) -> () {
        checkCaller!(callerAddress!() == parentContract, 0)

        assert!(caller == creator, 1)

        maxTime = time
    }

    @using(checkExternalCaller = true, updateFields = true)
    pub fn editLiquidation(caller: Address, liquidate: Bool) -> () {
        checkCaller!(callerAddress!() == parentContract, 0)

        assert!(caller == creator, 1)

        liquidation = liquidate
    }

    // delegate
    @using(checkExternalCaller = true, updateFields = true, preapprovedAssets = true)
    pub fn delegate(caller: Address, amount: U256) -> () {
        checkCaller!(callerAddress!() == parentContract, 0)

        assert!(amount < tokenAmount, 4)

        transferToken!(selfAddress!(), caller, token, tokenAmount)
        transferToken!(selfAddress!(), caller, ALPH, dustAmount!())

        tokenAmount = tokenAmount - amount
    }

    @using(checkExternalCaller = true, updateFields = true, preapprovedAssets = true)
    pub fn add(caller: Address, amount: U256, gas: Bool) -> () {
        checkCaller!(callerAddress!() == parentContract, 0)

        assert!(caller == creator, 1)

        transferToken!(caller, selfAddress!(), token, amount)
        transferToken!(caller, selfAddress!(), ALPH, dustAmount!())

        if (gas) {
            transferToken!(caller, selfAddress!(), ALPH, minimalContractDeposit!())
        }

        tokenAmount = tokenAmount + amount
    }
}